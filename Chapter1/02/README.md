# 2장 URL과 리소스
URL(Uniform Resource Locator)은 인터넷 리소스를 가리키는 표준이름이다. 이를 통해 URL은 전자정보 일부를 가리키고 그것이 어디에 있고 어떻게 접근할 수 있는지 알려준다.

- URL 문법, 여러 URL 컴포넌트가 어떤 의미를 가지며 무엇을 수행하는지
- 여러 웹 클라이언트가 지원하는 상대 URL과 확장 URL 같은 단축 URL에 대해서
- URL의 인코딩과 문자 규칙
- 여러 인터넷 정보 시스템에 적용되는 공통 URL 스킴
- 기존 이름은 유지하면서 객체들을 다른 장소로 옮기는 것을 가능하게 해주는 URN(Uniform Resource Name)을 포함한 URL의 미래

  ## 2.1 인터넷의 리소스 탐색하기
  URL은 통합 자원 식별자(Uniform Resource Identifier) 혹은 URI라고 불리는 더 일반화된 부류의 부분집합이다. 
  - URI는 URL과 URN으로 구성된 종합적인 개념이다.
  - HTTP 애플리케이션은 URL을 URI의 한 부분으로 취급한다.
  - URL은 HTTP 프로토콜이 아닌 다른 가용한 프로토콜을 사용할 수도 있다.
  > 스킴://서버위치/경로
    ### 2.1.1 URL이 있기 전 암흑의 시대
    - "ftp.joes-hardware.com'에 FTP로 접속해서, 익명 사용자로 로그인 해
    - pub 디렉토리로 이동한 다음 바이너리 형식으로 전환해
    - complete-catalog.xls란 이름의 파일을 로컬로 다운 받으면 돼
  
  ## 2.2 URL 문법
  > <스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프레그먼트>

  |컴포넌트|설명|기본값|
  |-------------|----------|-----------|
  |스킴|리소스를 가져오려면 어떤 프로토콜을 사용하여 서버에 접근해야 하는지 가리킨다.|없음|
  |사용자 이름| 몇몇 스킴은 리소스에 접근을 하기 위해 사용자 이름을 필요로 한다.| anonymous |
  |비밀번호 | 사용자의 비밀번호를 가리키며, 사용자 이름에 콜론(:)으로 이어서 기술한다.| <이메일 주소>|
  |호스트 | 리소스를 호스팅하는 서버의 호스트 명이나 IP주소 | 없음 |
  | 포트 | 리소스를 호스팅하는 서버가 열어놓은 포트번호. 많은 스킴이 기본 포트를 가지고 있다 (HTTP의 기본 포트는 80, HTTP는 443) | 스킴에 따라 다름 |
  | 경로 | 이전 컴포넌트와 빗금(/)으로 구분되어 있으며, 서버 내 리소스가 서버 어디에 있는지를 가리킨다. 경로 컴포넌트의 문법은 서버와 스킴에 따라 다르다.(이 장 뒤에서는 URL의 경로를 세그먼트로 나눌 수 있고, 각 세그먼트는 자체 컴포넌트를 가질 수 있다는 것을 알게 될 것이다.)|없음|
  |파라미터|특정 스킴들에서 입력 파라미터를 기술하는 용도로 사용한다. 파라미터는 이름/값을 쌍으로 가진다. 파라미터는, 다른 파라미터나 ㄱ여로의 일부와 세미콜론(;)으로 구분하여 기술하며, 여러 개를 가질 수 있다. | 없음 |
  | 질의 | 스킴에서 애플리케이션(데이터베이스, 게시판, 검색엔진, 기타 인터넷 게이트웨이)에 파라미터를 전달하는데 쓰인다. 질의 컴포넌트를 작성하는데 쓰이는 공통 포맷은 없다. 이는 URL의 끝에 "?"로 구분한다. | 없음 |
  | 프레그먼트 | 리소스의 조각이나 일부분을 가리키는 이름이다. URL이 특정 객체를 가리킬 경우에 프래그먼트 필드는 서버에 전달되지 않는다. 이는 클라이언트에서만 사용한다. URL의 끝에서 "#"문자로 구분한다. | 없음 |

    ### 2.2.1 스킴 : 사용할 프로토콜
    주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보다.
    - 어떤 프로토콜을 사용하여 리소스를 요청해야 하는지 알려줌

    ### 2.2.2 호스트와 포트
    - 호스트 컴포넌트는 접근하려고 하는 리소스를 가지고 있는 인터넷상의 호스트 장비를 가리킨다.
    > 호스트명 : http://www.joes-hardware.com:80/index.html </br>
    > IP주소 : http://161.58.228.45:80/index.html

    ### 2.2.3 사용자 이름과 비밀번호
    많은 서버가 자신이 가지고 있는 데이터에 접근을 허용하기 전에 사용자 이름과 비밀번호를 요구한다. 
    - 예시) FTP 서버

    ### 2.2.4 경로
    리소스가 서버의 어디에 있는지 알려주는 URL의 경로 컴포넌트

    ### 2.2.5 파라미터
    많은 스킴이 객체에 대한 호스트 및 경로 정보만으로는 리소스를 찾지 못한다.
    URL을 사용하는 애플리케이션이 리소스에 접근하려면 프로토콜 파라미터가 필요하다.
    - 서버가 어떤 포트를 열어놓고 있는지
    - 리소스에 접근하기 위해 사용자 이름과 비밀번호를 명시했는지 여부 등

    ### 2.2.6 질의 문자열
    데이터베이스 같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해서 질문이나 질의를 받을 수 있다.

    ### 2.2.7 프레그먼트
    HTML 같은 리소스 형식들은 본래의 수준보다 더 작게 나뉠 수 있다.
    - 예를 들어, 절(paragraph)이 포함된 용량이 큰 한 개의 텍스트 문서의 경우, 그 리소스에 대한 URL은 텍스트 문서 전체를 가리키겠지만, 이상적으로는 리소스 안에 있는 특정 절을 가리킬 수 있어야 한다.

  ## 2.3 단축 URL
  웹 클라이언트는 몇몇 단축 URL을 인식하고 사용한다. 상대 URL은 리소스 안에 있는 리소스를 간결하게 기술하는데 사용할 수 있다. 많은 브라우저가 사용자가 기억하고 있는 URL일부를 입력하면 나머지 부분을 자동으로 입력해주는 URL '자동 확장'을 지원한다.

    ### 2.3.1 상대 URL
    - 상대 URL은 절대 URL과 다르게, 리소스에 필요한 모든 정보를 가지고 있지 않다.
     - 모든 정보를 얻기 위해서 기저(base)라고 하는 또 다른 URL을 사용해야 한다.


    ### 2.3.2 URL 확장
    어떤 브라우저들은 URL을 입력한 후, 입력하는 동안에 자동으로 URL을 확장한다.
    - 이를 통해 사용자가 URL을 빠르게 입력할 수 있게 해준다.
    1. 호스트 명 확장
    - 단순한 휴리스틱만을 사용해서 입력한 호스트 명을 전체 호스트 명을 확장할 수 있다.

    > 휴리스틱이 뭐지? </br>
    > 휴리스틱(heuristics, 경험적인_스스로 발견하게 하는) 알고리즘이란? 불충분한 시간이나 정보로 인하여 합리적인 판단을 할 수 없거나, 체계적이면서 합리적인 판단이 굳이 필요하지 않은 상황에서 사람들이 빠르게 사용할 수 있게 보다 용이하게 구성된 간편 추론의 방법이다.
     
    2. 히스토리 확장
    -  과거에 사용자가 방문했던 URL의 기록을 저장해놓는 것
    - 프록시를 사용할 경우 URL 자동 확장 기능은 다르게 동작할 수 있다는 것을 유념하자. (이후에 자세히 다룰 예정)

  ## 2.4 안전하지 않은 문자
  - 범용성과 안정성을 위해서 URL은 더 완벽하게 안전할 수 있는 문자만을 사용할 수 있게 했다.
    ### 2.4.1 URL 문자 집합
     - 과거부터 사용해온 US-ASCII 문자
      - 7비트
      - 문자를 서식화
      - 하드웨어상에서 신호를 주고 받기 위해 사용
    - 한계
      - 만들어진 지 오래된 문자 집합이기 때문에, 적은 수의 문자만을 포함
      - 전 세계 십수억의 사람들이 사용하는 유럽 언어나 수백 가지의 비라틴계 언어들에 존재하는 변형된 문자들까지 반영하지는 못함
      - 이진 데이터를 포함해야 하는 경우도 지원하지 않음
    - 그래서 URL 설계자들은 URL에 이스케이프 문자열을 쓸 수 있게 설계했다.
  
    ### 2.4.2 인코딩 체계
     - 안전한 문자 집합을 이용하는 경우, 그 표현의 한계를 넘기 위해, URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식이 고안되었다.
     - 인코딩은 안전하지 않은 문자를 퍼센트 기호로 시작해, ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어진 '이스케이프' 문자로 바꾼다.

     |문자|ASCII 코드 | URL의 예|
     |---|---|---|
     |~|126(0x7E) | http://www.joes-hardware.com/%7Eojoe|
     |빈문자| 32(0x20)|http://www.joes-hardware.com/more%20tools.html|
     |%|37 (0x25)|http://www.joes-hardware.com/100%25satisfaction.html|

     ###  2.4.3 문자 제한
     | 문자 | 선점 및 제한 |
     | ----| ------------|
     |% | 인코딩된 문자에 사용할 이스케이프 토큰으로 선점 |
     |/ | 경로 컴포넌트에 있는 경로 세그먼트를 나누는 용도로 선점|
     |.|경로 컴포넌트에서 선점 |
     |..|경로 컴포넌트에서 선점 |
     |#|프레그먼트의 구획 문자로 선점|
     | ? | 질의 문자열의 구획 문자로 선점 |
     | ; | 파라미터의 구획 문자로 선점 |
     | : |스킴, 사용자 이름/비밀번호, 호스트/포트의 구획 문자로 선점|
     | $, + | 선점 |
     | @ & = | 특정 스킴에서 특별한 의미가 있기 때문에 선점 |
     | {} |\ 중간점 ~ [] ` | 게이트웨이와 같은 여러 전송 에이전트에서 불안전하게 다루기 때문에 제한 됨|
     | <> * | 안전하지 않음. 웹 문서에서 URL을 구분 지어 표시하듯이 (예를 들어 `http://www.joes-hardware.com`). URL범위 밖에서 역할이 있는 문자열이기 때문에 반드시 인코딩 해야 한다.|
     | 0x00-0x1F, 0x7F | 제한 됨. 이 16진수 범위에 속하는 문자들은 인쇄되지 않는 US-ASCII 문자다.|
     | > 0x7F | 제한됨. 이 16진수 범위에 속하는 문자들은 7비트 US-ASCII 문자가 아니다.|

     ### 2.4.4. 좀 더 알아보기
     ... 생략

  ## 2.6 미래
  URL의 한계
  - 리소스의 위치가 옮겨지면 해당 URL을 이용할 수 없음

  URN(Uniform Resource Names)
  - 객체가 옮겨지더라도 (웹 서버 내에서나 웹 서버 간 모두) 항상 객체를 가리킬 수 있는 이름을 제공한다.
  - 지속 통합 자원 지시자(Persistent uniform resource locators, PURL)을 사용하면 URL로 URN의 기능을 제공할 수 있다.
    - PURL은 리소스의 실제 URL 목록을 관리하고 추적하는 리소스 위치 중개 서버를 두고, 해당 리소스를 우회적으로 제공한다.
    - 클라이언트는 위치 할당자에게 리소스를 가져올 수 있는 영구적인 URL을 요청할 수 있으며, 영구적인 URL은 클라이언트를 리소스의 실제 URL로 연결해준다.

    ### 2.6.1 지금이 아니면 언제?
    